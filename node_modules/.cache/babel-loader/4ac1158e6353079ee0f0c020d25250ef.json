{"ast":null,"code":"var _jsxFileName = \"E:\\\\prots\\\\app\\\\src\\\\Login\\\\index.tsx\";\nimport React from 'react';\nimport axios from 'axios';\nimport { useHistory } from \"react-router-dom\";\n\nconst fire = require('../images/fire.png');\n\nconst logo = require('../images/propit.png');\n\nconst Login = () => {\n  const history = useHistory();\n  const details = {\n    username: '',\n    password: ''\n  };\n  React.useEffect(() => {\n    fetch('http://localhost:3001/tasks', {\n      method: 'get',\n      headers: new Headers({\n        'Authorization': 'Bearer ' + localStorage.getItem('tokenP')\n      })\n    }).then(results => results.json()).then(data => {\n      if (data.error && data.error === 401) {\n        localStorage.removeItem('tokenP');\n        history.push(\"/login\");\n      }\n\n      setUser(prevArray => []);\n      data.map((item, k) => (item.Date = handleDate(item.Date.split('T')[0]), setUser(prevArray => [...prevArray, item])));\n    }).catch(err => {});\n  }, []);\n\n  const callApi = () => {\n    console.log(details);\n    const config = {\n      headers: {\n        'Content-Type': 'application/json',\n        'Accept': 'application/json'\n      },\n      data: {},\n      params: details\n    };\n    axios.post('http://localhost:3001/login', {\n      username: details.username,\n      password: details.password\n    }).then(function (response) {\n      console.log(response);\n      localStorage.setItem('tokenP', response.data);\n      history.push(\"/dashboard\");\n    }).catch(function (error) {\n      console.log(error);\n    });\n  };\n\n  const handleNameChange = event => {\n    details.username = event.target.value;\n    console.log(details.username);\n  };\n\n  const handlePasswordChange = event => {\n    details.password = event.target.value;\n    console.log(details.password);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 9\n    }\n  }, \"\\u05D0\", /*#__PURE__*/React.createElement(\"input\", {\n    onChange: e => {\n      handleNameChange(e);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 9\n    }\n  }, \"\\u05E1\", /*#__PURE__*/React.createElement(\"input\", {\n    onChange: e => {\n      handlePasswordChange(e);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => callApi(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 14\n    }\n  }, \"\\u05DC\\u05D7\\u05E5\")));\n};\n\nexport default Login;","map":{"version":3,"sources":["E:/prots/app/src/Login/index.tsx"],"names":["React","axios","useHistory","fire","require","logo","Login","history","details","username","password","useEffect","fetch","method","headers","Headers","localStorage","getItem","then","results","json","data","error","removeItem","push","setUser","prevArray","map","item","k","Date","handleDate","split","catch","err","callApi","console","log","config","params","post","response","setItem","handleNameChange","event","target","value","handlePasswordChange","e"],"mappings":"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","sourcesContent":["import React, {useState, Component} from 'react';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faEnvelopeOpen } from '@fortawesome/free-regular-svg-icons';\r\nimport { faBars, faCaretDown, faCaretLeft, faFire, faSearch } from '@fortawesome/free-solid-svg-icons';\r\nimport axios from 'axios';\r\nimport { Link, useHistory } from \"react-router-dom\";\r\nimport Dashboard from '../Dashboard/index'\r\nconst fire = require('../images/fire.png');\r\nconst logo = require('../images/propit.png');\r\n\r\n\r\n\r\nconst Login  = () =>  {\r\n  const history = useHistory();\r\n    const details = {\r\n        username: '',\r\n        password: ''\r\n      }\r\n\r\n    \r\n      React.useEffect(() => {\r\n        fetch('http://localhost:3001/tasks', {\r\n          method: 'get',\r\n          headers: new Headers({\r\n            'Authorization': 'Bearer ' + localStorage.getItem('tokenP')\r\n          })\r\n        })\r\n          .then(results => results.json())\r\n          .then(data => {\r\n    \r\n            if(data.error && data.error === 401){\r\n              localStorage.removeItem('tokenP')\r\n              history.push(\"/login\");\r\n            }\r\n            setUser(prevArray => [])\r\n            data.map((item, k) => (\r\n              item.Date = handleDate(item.Date.split('T')[0]),\r\n              setUser(prevArray => [...prevArray, item])\r\n              \r\n              \r\n    \r\n    \r\n    \r\n            ))\r\n           \r\n          }).catch((err) => {\r\n           \r\n          });\r\n      }, []); \r\n        \r\n\r\n\r\n   const callApi = () => {\r\n        console.log(details)\r\n        const config = {\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'Accept': 'application/json',\r\n            },\r\n            data: {},\r\n            params: details\r\n            \r\n        }\r\n\r\n        axios.post('http://localhost:3001/login', {\r\n            username: details.username,\r\n            password: details.password\r\n          })\r\n          .then(function (response) {\r\n            console.log(response);\r\n            localStorage.setItem('tokenP',response.data)\r\n            \r\n            history.push(\"/dashboard\");\r\n          })\r\n          .catch(function (error) {\r\n            console.log(error);\r\n          });\r\n      \r\n    }\r\n\r\n  const   handleNameChange = (event) => {\r\n        details.username = event.target.value;\r\n        console.log(details.username)\r\n    }\r\n    const handlePasswordChange = (event) => {\r\n        details.password = event.target.value;\r\n        console.log(details.password)\r\n    }\r\n\r\n\r\n      return (\r\n      <div>\r\n        <div>א<input onChange={e => {handleNameChange(e)}}/></div>\r\n        <div>ס<input onChange={e => {handlePasswordChange(e)}}/></div>\r\n        <div><button onClick={() => callApi()}>לחץ</button></div>\r\n    </div>);\r\n  \r\n    \r\n\r\n\r\n}\r\n\r\nexport default Login;\r\n"]},"metadata":{},"sourceType":"module"}